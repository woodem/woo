


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>woo.document &#8212; Woo 1.0+rev1-git-d0ff403 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/cloud.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>

    
    
     
        <script src="../../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../../_static/cloud.base.js"></script>
    

    
     
        <script src="../../_static/cloud.js"></script>
    

    <link rel="shortcut icon" href="../../_static/woo-favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../index.html">Woo 1.0+rev1-git-d0ff403 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">woo.document</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for woo.document</h1><div class="highlight"><pre>
<span></span><span class="c1"># encoding: utf-8</span>

<span class="kn">import</span> <span class="nn">woo</span>
<span class="kn">import</span> <span class="nn">woo.core</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">minieigen</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">logging</span>


<span class="n">sphinxOnlineDocPath</span><span class="o">=</span><span class="s1">&#39;http://www.woodem.org/&#39;</span>
<span class="s2">&quot;Base URL for the documentation. Packaged versions should change to the local installation directory.&quot;</span>

<span class="kn">import</span> <span class="nn">os.path</span>
<span class="c1"># find if we have docs installed locally from package</span>
<span class="n">sphinxLocalDocPath</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">prefix</span><span class="o">+</span><span class="s1">&#39;/share/doc/woo&#39;</span><span class="o">+</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">suffix</span><span class="o">+</span><span class="s1">&#39;/html/&#39;</span>
<span class="c1"># FIXME: unfortunately file:// links don&#39;t seem to work with anchors, so just make this invalid</span>
<span class="n">sphinxBuildDocPath</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="o">+</span><span class="s1">&#39;/doc/sphinx2/build/html/REMOVE_THIS_TO_USE_LOCAL_DOCS&#39;</span>
<span class="c1"># we prefer the packaged documentation for this version, if installed</span>
<span class="k">if</span>   <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sphinxLocalDocPath</span><span class="o">+</span><span class="s1">&#39;/index.html&#39;</span><span class="p">):</span> <span class="n">sphinxPrefix</span><span class="o">=</span><span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">sphinxLocalDocPath</span>
<span class="c1"># otherwise look for documentation generated in the source tree</span>
<span class="k">elif</span>  <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sphinxBuildDocPath</span><span class="o">+</span><span class="s1">&#39;/index.html&#39;</span><span class="p">):</span> <span class="n">sphinxPrefix</span><span class="o">=</span><span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">sphinxBuildDocPath</span>
<span class="c1"># fallback to online docs</span>
<span class="k">else</span><span class="p">:</span> <span class="n">sphinxPrefix</span><span class="o">=</span><span class="n">sphinxOnlineDocPath</span>


<div class="viewcode-block" id="fixDocstring"><a class="viewcode-back" href="../../woo.document.html#woo.document.fixDocstring">[docs]</a><span class="k">def</span> <span class="nf">fixDocstring</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:ref:&#39;</span><span class="p">,</span><span class="s1">&#39;:obj:&#39;</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!</span><span class="se">\\</span><span class="s1">)\$([^\$]+)(?&lt;!</span><span class="se">\\</span><span class="s1">)\$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;\ :math:`\1`\ &#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">\$&#39;</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;$&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;Overloaded function.&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="s1">&#39;#</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span></div>

<span class="n">allWooClasses</span><span class="p">,</span><span class="n">allWooMods</span><span class="o">=</span><span class="nb">set</span><span class="p">(),</span><span class="nb">set</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">_ensureInitialized</span><span class="p">():</span>
    <span class="s1">&#39;Fill allWooClasses and allWooMods, called automatically as needed&#39;</span>
    <span class="k">global</span> <span class="n">allWooClasses</span><span class="p">,</span><span class="n">allWooMods</span>
    <span class="k">if</span> <span class="n">allWooClasses</span><span class="p">:</span> <span class="k">return</span>  <span class="c1"># do nothing if already filled</span>
    <span class="k">def</span> <span class="nf">subImport</span><span class="p">(</span><span class="n">pkg</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="s1">&#39;Import recursively all subpackages&#39;</span>
        <span class="kn">import</span> <span class="nn">pkgutil</span>
        <span class="k">for</span> <span class="n">importer</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">ispkg</span> <span class="ow">in</span> <span class="n">pkgutil</span><span class="o">.</span><span class="n">iter_modules</span><span class="p">(</span><span class="n">pkg</span><span class="o">.</span><span class="n">__path__</span><span class="p">):</span>
            <span class="n">fqmodname</span><span class="o">=</span><span class="n">pkg</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">modname</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">fqmodname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">exclude</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">exclude</span><span class="p">,</span><span class="n">fqmodname</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Skipping  &#39;</span><span class="o">+</span><span class="n">fqmodname</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">fqmodname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Importing &#39;</span><span class="o">+</span><span class="n">fqmodname</span><span class="o">+</span><span class="s1">&#39;... &#39;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">__import__</span><span class="p">(</span><span class="n">fqmodname</span><span class="p">,</span><span class="n">pkg</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ok&#39;</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="ne">NameError</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(error, ignoring)&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fqmodname</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="ow">and</span> <span class="n">ispkg</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Import submodules from &#39;</span><span class="p">,</span><span class="n">fqmodname</span><span class="p">)</span>
                <span class="n">subImport</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">fqmodname</span><span class="p">])</span>
                
    <span class="n">modExcludeRegex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^woo\.(_cxxInternal.*)(\..*|$)&#39;</span>
    <span class="n">subImport</span><span class="p">(</span><span class="n">woo</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="n">modExcludeRegex</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">wooExtra</span>
        <span class="n">subImport</span><span class="p">(</span><span class="n">wooExtra</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No wooExtra modules imported.&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">woo</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">compiledPyModules</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Importing&#39;</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
            <span class="nb">__import__</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

    <span class="c1"># global allWooClasses, allWooMods</span>
    <span class="n">cc</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span><span class="n">includeBase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">recurse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">modExcludeRegex</span><span class="p">,</span><span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="p">):</span> <span class="k">continue</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">=</span><span class="n">fixDocstring</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
        <span class="n">allWooClasses</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="n">allWooMods</span><span class="o">=</span><span class="nb">set</span><span class="p">([</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;woo&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="o">==</span><span class="n">m</span><span class="p">])</span>
    

<div class="viewcode-block" id="allWooPackages"><a class="viewcode-back" href="../../woo.document.html#woo.document.allWooPackages">[docs]</a><span class="k">def</span> <span class="nf">allWooPackages</span><span class="p">(</span><span class="n">outDir</span><span class="o">=</span><span class="s1">&#39;/tmp&#39;</span><span class="p">,</span><span class="n">skip</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^(woo|wooExtra(|\..*))$&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Generate documentation of packages in the Restructured Text format. Each package is written to file called *out*/.`woo.[package].rst` and list of files created is returned.&#39;&#39;&#39;</span>

    <span class="k">global</span> <span class="n">allWooClasses</span><span class="p">,</span><span class="n">allWooMods</span>
    <span class="n">_ensureInitialized</span><span class="p">()</span>
    
    <span class="n">modsElsewhere</span><span class="o">=</span><span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">allWooMods</span><span class="p">:</span> <span class="n">modsElsewhere</span><span class="o">|=</span><span class="nb">set</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_docInlineModules</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;_docInlineModules&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="p">())</span>

    <span class="c1"># woo.foo.* modules go insides woo.foo</span>
    <span class="c1">#print(repr(modsElsewhere))</span>
    <span class="n">toplevMods</span><span class="o">=</span><span class="nb">set</span><span class="p">([</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">allWooMods</span> <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">modsElsewhere</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">rsts</span><span class="o">=</span><span class="p">[]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TOPLEVEL MODULES&#39;</span><span class="p">,[</span><span class="n">m</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">toplevMods</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MODULES DOCUMENTED ELSEWHERE&#39;</span><span class="p">,[</span><span class="n">m</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">modsElsewhere</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">toplevMods</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">skip</span><span class="p">,</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[SKIPPING </span><span class="si">%s</span><span class="s1">]&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
            <span class="k">continue</span>
        <span class="n">outFile</span><span class="o">=</span><span class="n">outDir</span><span class="o">+</span><span class="s1">&#39;/</span><span class="si">%s</span><span class="s1">.rst&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WRITING&#39;</span><span class="p">,</span><span class="n">outFile</span><span class="p">,</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">rsts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span>
        <span class="n">out</span><span class="o">=</span><span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">outFile</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">oneModuleWithSubmodules</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span><span class="n">out</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">rsts</span></div>

<div class="viewcode-block" id="guessInstanceTypeFromCxxType"><a class="viewcode-back" href="../../woo.document.html#woo.document.guessInstanceTypeFromCxxType">[docs]</a><span class="k">def</span> <span class="nf">guessInstanceTypeFromCxxType</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span><span class="n">trait</span><span class="p">,</span><span class="n">noneOnFail</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">logging</span>
    <span class="s1">&#39;Return type object guessed from cxxType&#39;</span>
    <span class="n">wHead</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__module__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">trait</span><span class="o">.</span><span class="n">name</span>
    <span class="n">m</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^\s*(weak_ptr\s*&lt;|shared_ptr\s*&lt;)?([A-Za-z0-9_:]+)(\s*&gt;)?\s*&#39;</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">cT</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: got c++ base type: </span><span class="si">%s</span><span class="s1"> -&gt; </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">,</span><span class="n">cT</span><span class="p">))</span>
        <span class="n">klasses</span><span class="o">=</span><span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span><span class="n">includeBase</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="vm">__name__</span><span class="o">==</span><span class="n">cT</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">klasses</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">noneOnFail</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: no Python type object with name </span><span class="si">%s</span><span class="s1"> found (cxxType=</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">,</span><span class="n">cT</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">klasses</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: multiple Python types with name </span><span class="si">%s</span><span class="s1"> found (cxxType=</span><span class="si">%s</span><span class="s1">): </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">,</span><span class="n">cT</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">c</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">klasses</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">klasses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">noneOnFail</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: no c++ base type found for </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">))</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: using woo.core.Object as type&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span></div>

<div class="viewcode-block" id="guessListTypeFromCxxType"><a class="viewcode-back" href="../../woo.document.html#woo.document.guessListTypeFromCxxType">[docs]</a><span class="k">def</span> <span class="nf">guessListTypeFromCxxType</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span><span class="n">trait</span><span class="p">,</span><span class="n">warnFail</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="s2">&quot;Guess type of array from parsing trait.cxxType. Ugly but works.&quot;</span>
    <span class="c1"># head for warnings</span>
    <span class="n">wHead</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__module__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">trait</span><span class="o">.</span><span class="n">name</span>
    <span class="k">def</span> <span class="nf">vecTest</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">cxxT</span><span class="p">):</span>
        <span class="n">regexp</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^\s*(std\s*::)?\s*vector\s*&lt;\s*(shared_ptr\s*&lt;\s*)?\s*(std\s*::)?\s*(&#39;</span><span class="o">+</span><span class="n">T</span><span class="o">+</span><span class="sa">r</span><span class="s1">&#39;)(\s*&gt;)?\s*&gt;\s*$&#39;</span>
        <span class="n">m</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span><span class="n">cxxT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>
    <span class="k">def</span> <span class="nf">vecGuess</span><span class="p">(</span><span class="n">T</span><span class="p">):</span>
        <span class="n">regexp</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^\s*(std\s*::)?\s*vector\s*&lt;\s*(shared_ptr\s*&lt;\s*)?\s*(std\s*::)?\s*(?P&lt;elemT&gt;[a-zA-Z_][a-zA-Z0-9_]+)(\s*&gt;)?\s*&gt;\s*$&#39;</span>
        <span class="n">m</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span><span class="n">T</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>
    <span class="kn">from</span> <span class="nn">woo</span> <span class="k">import</span> <span class="n">dem</span>
    <span class="k">if</span> <span class="s1">&#39;opengl&#39;</span> <span class="ow">in</span> <span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">features</span><span class="p">:</span> <span class="kn">from</span> <span class="nn">woo</span> <span class="k">import</span> <span class="n">gl</span>
    <span class="kn">from</span> <span class="nn">woo</span> <span class="k">import</span> <span class="n">core</span>
    <span class="n">vecMap</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;bool&#39;</span><span class="p">:</span><span class="nb">bool</span><span class="p">,</span><span class="s1">&#39;int&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="s1">&#39;long&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="s1">&#39;Particle::id_t&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="s1">&#39;size_t&#39;</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span>
        <span class="s1">&#39;Real&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="s1">&#39;float&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="s1">&#39;double&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span>
        <span class="s1">&#39;Vector6r&#39;</span><span class="p">:</span><span class="n">Vector6</span><span class="p">,</span><span class="s1">&#39;Vector6i&#39;</span><span class="p">:</span><span class="n">Vector6i</span><span class="p">,</span><span class="s1">&#39;Vector3i&#39;</span><span class="p">:</span><span class="n">Vector3i</span><span class="p">,</span><span class="s1">&#39;Vector2r&#39;</span><span class="p">:</span><span class="n">Vector2</span><span class="p">,</span><span class="s1">&#39;Vector2i&#39;</span><span class="p">:</span><span class="n">Vector2i</span><span class="p">,</span>
        <span class="s1">&#39;Vector3r&#39;</span><span class="p">:</span><span class="n">Vector3</span><span class="p">,</span><span class="s1">&#39;Matrix3r&#39;</span><span class="p">:</span><span class="n">Matrix3</span><span class="p">,</span><span class="s1">&#39;Quaternionr&#39;</span><span class="p">:</span><span class="n">Quaternion</span><span class="p">,</span>
        <span class="s1">&#39;VectorXr&#39;</span><span class="p">:</span><span class="n">VectorX</span><span class="p">,</span><span class="s1">&#39;MatrixXr&#39;</span><span class="p">:</span><span class="n">MatrixX</span><span class="p">,</span>
        <span class="s1">&#39;AlignedBox2r&#39;</span><span class="p">:</span><span class="n">AlignedBox2</span><span class="p">,</span><span class="s1">&#39;AlignedBox3r&#39;</span><span class="p">:</span><span class="n">AlignedBox3</span><span class="p">,</span>
        <span class="s1">&#39;string&#39;</span><span class="p">:</span><span class="nb">str</span>
    <span class="p">}</span>
    <span class="n">cxxT</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cxxT</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Trait for </span><span class="si">%s</span><span class="s2"> does not define cxxType&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">T</span><span class="p">,</span><span class="n">ret</span> <span class="ow">in</span> <span class="n">vecMap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">vecTest</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">cxxT</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Got type </span><span class="si">%s</span><span class="s2"> from cxx type </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span><span class="n">cxxT</span><span class="p">))</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">ret</span><span class="p">,)</span>
    <span class="c1">#print &#39;No luck with &#39;,T</span>
    <span class="n">m</span><span class="o">=</span><span class="n">vecGuess</span><span class="p">(</span><span class="n">cxxT</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="c1"># print &#39;guessed literal type&#39;,m.group(&#39;elemT&#39;)</span>
        <span class="n">elemT</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;elemT&#39;</span><span class="p">)</span>
        <span class="n">klasses</span><span class="o">=</span><span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span><span class="n">includeBase</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="vm">__name__</span><span class="o">==</span><span class="n">elemT</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">klasses</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: no Python type object with name </span><span class="si">%s</span><span class="s1"> found (cxxType=</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">,</span><span class="n">elemT</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">klasses</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: multiple Python types with name </span><span class="si">%s</span><span class="s1"> found (cxxType=</span><span class="si">%s</span><span class="s1">): </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">wHead</span><span class="p">,</span><span class="n">elemT</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="p">,</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">c</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">klasses</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="p">(</span><span class="n">klasses</span><span class="p">[</span><span class="mi">0</span><span class="p">],)</span> <span class="c1"># return tuple to signify sequence</span>
    <span class="k">if</span> <span class="n">warnFail</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to guess python type from cxx type &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="o">%</span><span class="n">cxxT</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="makeTraitInfo"><a class="viewcode-back" href="../../woo.document.html#woo.document.makeTraitInfo">[docs]</a><span class="k">def</span> <span class="nf">makeTraitInfo</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">klass</span><span class="p">,</span><span class="n">trait</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">maybe_decode</span><span class="p">(</span><span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>

    <span class="n">hasVal</span><span class="o">=</span><span class="kc">True</span> <span class="c1"># true if the value is accessible from python</span>
    <span class="k">try</span><span class="p">:</span> <span class="n">val</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">trait</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span> <span class="n">hasVal</span><span class="o">=</span><span class="kc">False</span>

    <span class="n">ret</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">static</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">)</span>
    <span class="n">tt</span><span class="o">=</span><span class="kc">None</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">trait</span><span class="p">,</span><span class="s1">&#39;pyType&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">pyType</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)):</span> <span class="n">tt</span><span class="o">=</span><span class="s1">&#39;[&#39;</span><span class="o">+</span><span class="n">trait</span><span class="o">.</span><span class="n">pyType</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s2">&quot;, …]&quot;</span>
        <span class="k">elif</span> <span class="n">trait</span><span class="o">.</span><span class="n">pyType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">tt</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">pyType</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="c1"># else: ret.append(&#39;type: None?&#39;) # ??</span>
    <span class="k">if</span> <span class="n">tt</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">hasVal</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">)</span> <span class="ow">and</span> <span class="n">val</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="o">==</span><span class="s1">&#39;minieigen&#39;</span><span class="p">:</span> <span class="n">tt</span><span class="o">=</span><span class="s1">&#39;:obj:`</span><span class="si">%s</span><span class="s1"> &lt;minieigen:minieigen.</span><span class="si">%s</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">val</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">tt</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span><span class="s1">&#39;Real&#39;</span><span class="p">,</span><span class="s1">&#39;long&#39;</span><span class="p">,</span><span class="s1">&#39;size_t&#39;</span><span class="p">,</span><span class="s1">&#39;ContainerT&#39;</span><span class="p">,</span><span class="s1">&#39;PendingContact&#39;</span><span class="p">,</span><span class="s1">&#39;std::vector&lt;PendingContact&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;list&lt;id_t&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;shared_ptr&lt;SpherePack&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;list&lt;id_t&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;boost_multi_array_real_5&#39;</span><span class="p">,</span><span class="s1">&#39;py::object&#39;</span><span class="p">):</span> <span class="n">tt</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tt</span><span class="p">:</span>
            <span class="n">l</span><span class="o">=</span><span class="n">guessListTypeFromCxxType</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span><span class="n">trait</span><span class="p">,</span><span class="n">warnFail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">l</span> <span class="ow">and</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__module__</span><span class="o">!=</span><span class="s1">&#39;__builtin__&#39;</span><span class="p">:</span> <span class="n">tt</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="s1">&#39;:obj:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tt</span><span class="p">:</span>
            <span class="n">t</span><span class="o">=</span><span class="n">guessInstanceTypeFromCxxType</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span><span class="n">trait</span><span class="p">,</span><span class="n">noneOnFail</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t</span> <span class="ow">and</span> <span class="n">t</span><span class="o">.</span><span class="vm">__module__</span><span class="o">!=</span><span class="s1">&#39;__builtin__&#39;</span><span class="p">:</span> <span class="n">tt</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="s1">&#39;:obj:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">t</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">t</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tt</span><span class="p">:</span> <span class="n">tt</span><span class="o">=</span><span class="n">trait</span><span class="o">.</span><span class="n">cxxType</span>
    <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;type: &#39;</span><span class="o">+</span><span class="n">tt</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">unit</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">unit</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;unit: &#39;</span><span class="o">+</span><span class="n">maybe_decode</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;units: [&#39;</span><span class="o">+</span><span class="sa">u</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">maybe_decode</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">trait</span><span class="o">.</span><span class="n">unit</span><span class="p">)</span><span class="o">+</span><span class="sa">u</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">prefUnit</span> <span class="ow">and</span> <span class="n">trait</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="n">trait</span><span class="o">.</span><span class="n">prefUnit</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">unit</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;preferred unit: &#39;</span><span class="o">+</span><span class="n">maybe_decode</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">prefUnit</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;preferred units: [&#39;</span><span class="o">+</span><span class="sa">u</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">maybe_decode</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">trait</span><span class="o">.</span><span class="n">prefUnit</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">range</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;range: </span><span class="si">%g</span><span class="s1">−</span><span class="si">%g</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">trait</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">noGui</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;not shown in the UI&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">noDump</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;not dumped&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">noSave</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;not saved&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">hidden</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;not accessible from python&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;read-only in python&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">deprecated</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;**DEPRECATED**, raises ``ValueError`` when accessed&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">choice</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">trait</span><span class="o">.</span><span class="n">namedEnum</span><span class="p">:</span> <span class="c1"># named enums formatted differently below</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">tuple</span><span class="p">):</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;choices: &#39;</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> = </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;|&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;``&#39;</span><span class="o">+</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;``&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">trait</span><span class="o">.</span><span class="n">choice</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;choices: &#39;</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">trait</span><span class="o">.</span><span class="n">choice</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">namedEnum</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;named enum, possible values are: &#39;</span><span class="o">+</span><span class="n">trait</span><span class="o">.</span><span class="n">namedEnum_validValues</span><span class="p">(</span><span class="n">pre0</span><span class="o">=</span><span class="s2">&quot;**&#39;&quot;</span><span class="p">,</span><span class="n">post0</span><span class="o">=</span><span class="s2">&quot;&#39;**&quot;</span><span class="p">,</span><span class="n">pre</span><span class="o">=</span><span class="s2">&quot;*&#39;&quot;</span><span class="p">,</span><span class="n">post</span><span class="o">=</span><span class="s2">&quot;&#39;*&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">existingFilename</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;existing filename&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">dirname</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;directory name&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">bits</span><span class="p">:</span> <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;bit accessors: &#39;</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;**&#39;</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="s1">&#39;**&#39;</span> <span class="k">for</span>  <span class="n">b</span> <span class="ow">in</span> <span class="n">trait</span><span class="o">.</span><span class="n">bits</span><span class="p">]))</span>

    <span class="k">return</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="classSrcHyperlink"><a class="viewcode-back" href="../../woo.document.html#woo.document.classSrcHyperlink">[docs]</a><span class="k">def</span> <span class="nf">classSrcHyperlink</span><span class="p">(</span><span class="n">klass</span><span class="p">):</span>
    <span class="s1">&#39;Return ReST-formatted line with hyperlinks to class headers (and implementation, if the corresponding .cpp file exists).&#39;</span>
    <span class="k">def</span> <span class="nf">findFirstLine</span><span class="p">(</span><span class="n">ff</span><span class="p">,</span><span class="n">pattern</span><span class="p">,</span><span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">regex</span><span class="p">:</span> <span class="n">pat</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">ff</span><span class="p">):</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">numLines</span><span class="o">=</span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">ff</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span> <span class="k">if</span> <span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">if</span> <span class="n">regex</span> <span class="k">else</span> <span class="p">(</span><span class="n">l</span><span class="o">==</span><span class="n">pattern</span><span class="p">))]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">numLines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">numLines</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">woo.config</span><span class="o">,</span> <span class="nn">inspect</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">hashlib</span>
    <span class="n">pysrc</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">getsourcefile</span><span class="p">(</span><span class="n">klass</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pysrc</span><span class="p">:</span> <span class="c1"># python class</span>
        <span class="n">lineNo</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">getsourcelines</span><span class="p">(</span><span class="n">klass</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">pysrc1</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">pysrc</span><span class="p">)</span>
        <span class="c1"># locate the file in the source tree (as a quick hack, just use filename match)</span>
        <span class="n">matches</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">root</span><span class="p">,</span><span class="n">dirnames</span><span class="p">,</span><span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="p">):</span>
            <span class="n">relRoot</span><span class="o">=</span><span class="n">root</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">relRoot</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">relRoot</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;debian&#39;</span><span class="p">):</span> <span class="k">continue</span> <span class="c1"># garbage</span>
            <span class="n">matches</span><span class="o">+=</span><span class="p">[</span><span class="n">relRoot</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filenames</span> <span class="k">if</span> <span class="n">f</span><span class="o">==</span><span class="n">pysrc1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
            <span class="c1">#print &#39;WARN: multiple files named %s, using the first one: %s&#39;%(pysrc1,str(matches))</span>
            <span class="k">def</span> <span class="nf">fileHash</span><span class="p">(</span><span class="n">src</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">src</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">src</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="n">md0</span><span class="o">=</span><span class="n">fileHash</span><span class="p">(</span><span class="n">pysrc</span><span class="p">)</span>
            <span class="n">matches</span><span class="o">=</span><span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">matches</span> <span class="k">if</span> <span class="n">fileHash</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">m</span><span class="p">)</span><span class="o">==</span><span class="n">md0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARN: no file named </span><span class="si">%s</span><span class="s1"> with matching md5 digest found in source tree?&#39;</span><span class="o">%</span><span class="n">pysrc1</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARN: multiple files named </span><span class="si">%s</span><span class="s1"> with the same md5 found in the source tree, using the one with shortest path.&#39;</span><span class="o">%</span><span class="n">pysrc1</span><span class="p">)</span>
                <span class="n">matches</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
                <span class="n">match</span><span class="o">=</span><span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">match</span><span class="o">=</span><span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="n">match</span><span class="o">=</span><span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARN: no python source </span><span class="si">%s</span><span class="s1"> found.&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pysrc1</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="s1">&#39;[:woosrc:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">#L</span><span class="si">%s</span><span class="s1">&gt;`]&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">match</span><span class="p">,</span><span class="n">match</span><span class="p">,</span><span class="n">lineNo</span><span class="p">)</span>


        
    <span class="k">if</span> <span class="ow">not</span> <span class="n">klass</span><span class="o">.</span><span class="n">_classTrait</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
    <span class="c1"># woo.config.buildRoot</span>
    <span class="n">f</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="n">_classTrait</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
    <span class="n">src</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">src</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Absolute source path </span><span class="si">%s</span><span class="s1"> does not start with absolute source dir </span><span class="si">%s</span><span class="s1">!&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">src</span><span class="p">))</span>
    <span class="n">f2</span><span class="o">=</span><span class="n">f</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">src</span><span class="p">)]</span> 
    <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="p">):</span> <span class="n">commonRoot</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span>
        <span class="k">elif</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">buildRoot</span><span class="p">):</span> <span class="n">commonRoot</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">buildRoot</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">):</span> <span class="n">commonRoot</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File where class is defined (</span><span class="si">%s</span><span class="s1">) does not start with source root (</span><span class="si">%s</span><span class="s1">) or build root (</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="p">,</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">buildRoot</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># +1 removes underscore in woo/...</span>
    <span class="c1"># if this header was copied into include/, get rid of that now</span>
    <span class="n">m</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;include/woo/(.*)&#39;</span><span class="p">,</span><span class="n">f2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span> <span class="n">f2</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">f2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.hpp&#39;</span><span class="p">):</span> <span class="n">hpp</span><span class="p">,</span><span class="n">cpp</span><span class="p">,</span><span class="n">lineIs</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span><span class="n">f2</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.cpp&#39;</span><span class="p">,</span><span class="s1">&#39;hpp&#39;</span>
    <span class="k">elif</span> <span class="n">f2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.cpp&#39;</span><span class="p">):</span> <span class="n">hpp</span><span class="p">,</span><span class="n">cpp</span><span class="p">,</span><span class="n">lineIs</span><span class="o">=</span><span class="n">f2</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hpp&#39;</span><span class="p">,</span><span class="n">f2</span><span class="p">,</span><span class="s1">&#39;cpp&#39;</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span> <span class="c1"># should not happen, anyway</span>

    <span class="n">hppLine</span><span class="o">=</span><span class="n">findFirstLine</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">hpp</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;^(.*\s)?(struct|class)\s+</span><span class="si">%s</span><span class="s1">\s*({|:).*$&#39;</span><span class="o">%</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">cppLine</span><span class="o">=</span><span class="n">findFirstLine</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sourceRoot</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">cpp</span><span class="p">,</span><span class="sa">r</span><span class="s1">&#39;^(.*\s)?</span><span class="si">%s</span><span class="s1">::.*$&#39;</span><span class="o">%</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">ret</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">if</span> <span class="n">hppLine</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span> <span class="n">ret</span><span class="o">+=</span><span class="p">[</span><span class="s1">&#39;:woosrc:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">#L</span><span class="si">%d</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">hpp</span><span class="p">,</span><span class="n">hpp</span><span class="p">,</span><span class="n">hppLine</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.hpp&#39;</span><span class="p">):</span> <span class="n">ret</span><span class="o">+=</span><span class="p">[</span><span class="s1">&#39;:woosrc:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">#L</span><span class="si">%d</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">hpp</span><span class="p">,</span><span class="n">hpp</span><span class="p">,</span><span class="n">klass</span><span class="o">.</span><span class="n">_classTrait</span><span class="o">.</span><span class="n">line</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARN: No header line found for </span><span class="si">%s</span><span class="s1"> in </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">hpp</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">cppLine</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span> <span class="n">ret</span><span class="o">+=</span><span class="p">[</span><span class="s1">&#39;:woosrc:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">#L</span><span class="si">%d</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">cpp</span><span class="p">,</span><span class="n">cpp</span><span class="p">,</span><span class="n">cppLine</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">pass</span> <span class="c1"># print &#39;No impl. line found for %s in %s&#39;%(klass.__name__,cpp)</span>
    <span class="c1">#ret=[&#39;:woosrc:`header &lt;%s#L%d&gt;`&#39;%(f2,klass._classTrait.line)]</span>
    <span class="c1">#if f2.endswith(&#39;.hpp&#39;):</span>
    <span class="c1">#    cpp=woo.config.sourceRoot+&#39;/&#39;+f2[:-4]+&#39;.cpp&#39;</span>
    <span class="c1">#    # print &#39;Trying &#39;,cpp</span>
    <span class="c1">#    if os.path.exists(cpp):</span>
    <span class="c1">#        # find first line in the cpp file which contains KlassName:: -- that&#39;s most likely where the implementation begins</span>
    <span class="c1">#        numLines=[i for i,l in enumerate(open(cpp).readlines()) if klass.__name__+&#39;::&#39; in l]</span>
    <span class="c1">#        if numLines: ret.append(&#39;:woosrc:`implementation &lt;%s#L%d&gt;`&#39;%(f2[:-4]+&#39;.cpp&#39;,numLines[0]+1))</span>
    <span class="c1">#        # return just the cpp file if the implementation is probably not there at all?</span>
    <span class="c1">#        # don&#39;t do it for now</span>
    <span class="c1">#        # else: ret.append(&#39;:woosrc:`implementation &lt;%s#L&gt;`&#39;%(f2[:-4]+&#39;.cpp&#39;))</span>
    <span class="k">if</span> <span class="n">ret</span><span class="p">:</span> <span class="k">return</span> <span class="s1">&#39;[ &#39;</span><span class="o">+</span><span class="s1">&#39; , &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; ]&#39;</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="classDocHierarchy_topsAndDict"><a class="viewcode-back" href="../../woo.document.html#woo.document.classDocHierarchy_topsAndDict">[docs]</a><span class="k">def</span> <span class="nf">classDocHierarchy_topsAndDict</span><span class="p">(</span><span class="n">mod</span><span class="p">):</span>
    <span class="s1">&#39;Return tuple containing list of top-level class objects, and dictionary which maps all module-contained class objects to classes which should be documented under it (derived classes, and doc-related classes specified via ClassTrait.section&#39;</span>
    <span class="k">global</span> <span class="n">allWooClasses</span><span class="p">,</span><span class="n">allWooMods</span>
    <span class="n">_ensureInitialized</span><span class="p">()</span>
    <span class="c1"># kk=woo.system.childClasses(woo.core.Object,includeBase=True) # all woo classes</span>
    <span class="n">dd</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">allWooClasses</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">==</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">:</span> <span class="k">continue</span> <span class="c1"># obejct itself is not documented this way</span>
        <span class="n">t</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">_classTrait</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="vm">__module__</span><span class="o">!=</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span> <span class="k">continue</span>
        <span class="n">dd</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">docOther</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Cross-module documentation not yet supported.&quot;</span><span class="p">)</span>
                <span class="n">dd</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">dd</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="vm">__module__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">a</span><span class="p">))</span>
            <span class="c1"># [eval(&#39;%s.%s&#39;%(k.__module__,a)) for a in t.docOther] # perhaps not in the same module? fix here!!</span>
        <span class="c1">#print t.name,t.docOther,t.intro,t.title</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">dd</span><span class="p">:</span>
        <span class="c1"># if the base is documented, put it under the base class (prepend)</span>
        <span class="n">b</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">dd</span><span class="p">:</span> <span class="n">dd</span><span class="p">[</span><span class="n">b</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="n">dd</span><span class="p">[</span><span class="n">b</span><span class="p">]</span>
    <span class="n">tops</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">dd</span><span class="p">:</span>
        <span class="n">refs</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">kk</span><span class="p">,</span><span class="n">vv</span> <span class="ow">in</span> <span class="n">dd</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">vv</span><span class="p">:</span> <span class="n">refs</span><span class="o">+=</span><span class="p">[</span><span class="n">kk</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">refs</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">tops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">refs</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Class </span><span class="si">%s</span><span class="s1"> listed under multiple classes: &#39;</span><span class="o">%</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">]))</span>
        <span class="c1"># if the class has one single reference, it is not a top class</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">tops</span><span class="p">,</span><span class="n">dd</span><span class="p">)</span></div>


<div class="viewcode-block" id="oneModuleWithSubmodules"><a class="viewcode-back" href="../../woo.document.html#woo.document.oneModuleWithSubmodules">[docs]</a><span class="k">def</span> <span class="nf">oneModuleWithSubmodules</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span><span class="n">out</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">importedInto</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">allWooClasses</span><span class="p">,</span><span class="n">allWooMods</span>
    <span class="n">_ensureInitialized</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">exclude</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span> <span class="n">exclude</span><span class="o">=</span><span class="nb">set</span><span class="p">()</span> <span class="c1"># avoid referenced empty set to be modified</span>
    <span class="k">if</span> <span class="n">level</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">:</span> <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:mod:`</span><span class="si">%s</span><span class="s1">`</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,(</span><span class="mi">20</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="s1">&#39;=-^&quot;&#39;</span><span class="p">[</span><span class="n">level</span><span class="p">])))</span>
    <span class="k">if</span> <span class="n">importedInto</span><span class="p">:</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.. note:: This module is imported into the :obj:`</span><span class="si">%s</span><span class="s1">` module automatically; refer to its objects through :obj:`</span><span class="si">%s</span><span class="s1">`.</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">importedInto</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">importedInto</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_docOneClass</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">exclude</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="c1"># already-documented should not be documented again</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">k</span><span class="p">()</span>

        <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.. autoclass:: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="c1">#kOut.write(&#39;   :members: %s\n&#39;%(&#39;,&#39;.join([m for m in dir(k) if (not m.startswith(&#39;_&#39;) and m not in set(trait.name for trait in k._attrTraits))])))</span>
        <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;   :members:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># those will be documented explicitly</span>
        <span class="n">ex</span><span class="o">=</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">k</span><span class="o">.</span><span class="n">_attrTraits</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">):</span>
            <span class="c1"># this does not seem to work really...</span>
            <span class="c1"># exclude __init__ which would be shown by special-members, but is really useless for Object (always the same)</span>
            <span class="n">ex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">)</span>
            <span class="n">ex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;__getstate__&#39;</span><span class="p">)</span>
            <span class="n">ex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;__setstate__&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ex</span><span class="p">:</span> <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;   :exclude-members: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ex</span><span class="p">)))</span>
        <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;   :special-members:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">srcXref</span><span class="o">=</span><span class="n">classSrcHyperlink</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">srcXref</span><span class="p">:</span> <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">   &#39;</span><span class="o">+</span><span class="n">srcXref</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">trait</span> <span class="ow">in</span> <span class="n">k</span><span class="o">.</span><span class="n">_attrTraits</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">iniStr</span><span class="o">=</span><span class="s1">&#39; (= </span><span class="si">%s</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">ini</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="c1"># no converter found</span>
                <span class="n">iniStr</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">trait</span><span class="o">.</span><span class="n">startGroup</span><span class="p">:</span>
                <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;   .. rubric:: ► </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">startGroup</span><span class="p">))</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;   .. attribute:: </span><span class="si">%s%s</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">iniStr</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">fixDocstring</span><span class="p">(</span><span class="n">trait</span><span class="o">.</span><span class="n">doc</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span> <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      &#39;</span><span class="o">+</span><span class="n">l</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">traitInfo</span><span class="o">=</span><span class="n">makeTraitInfo</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">trait</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">traitInfo</span><span class="p">:</span> <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">      [&#39;</span><span class="o">+</span><span class="n">traitInfo</span><span class="o">+</span><span class="s1">&#39;]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">klasses</span><span class="o">=</span><span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">allWooClasses</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="o">==</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span><span class="s1">&#39;_docInlineModules&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="vm">__module__</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="p">]</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">_docInlineModules</span><span class="p">))]</span>
    <span class="n">klasses</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="n">tops</span><span class="p">,</span><span class="n">klassesUnder</span><span class="o">=</span><span class="n">classDocHierarchy_topsAndDict</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>

    <span class="c1">#global prevLevel</span>
    <span class="c1">#prevLevel=0</span>

    <span class="k">def</span> <span class="nf">_inheritanceDiagram</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">currmod</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">nodeName</span><span class="p">(</span><span class="n">kk</span><span class="p">):</span> <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">kk</span><span class="o">.</span><span class="vm">__module__</span><span class="o">==</span><span class="n">currmod</span> <span class="k">else</span> <span class="n">kk</span><span class="o">.</span><span class="vm">__module__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">+</span><span class="n">kk</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">def</span> <span class="nf">mkNode</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span><span class="n">fillcolor</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">&quot;</span><span class="si">%s</span><span class="s1">&quot; [shape=&quot;box&quot;,fontsize=8,style=&quot;setlinewidth(0.5),</span><span class="si">%s</span><span class="s1">&quot;,</span><span class="si">%s</span><span class="s1">height=0.2,URL=&quot;</span><span class="si">%s</span><span class="s1">.html#</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&quot;];</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">nodeName</span><span class="p">(</span><span class="n">kk</span><span class="p">),</span><span class="n">style</span><span class="p">,</span><span class="s1">&#39;fillcolor=</span><span class="si">%s</span><span class="s1">,&#39;</span><span class="o">%</span><span class="n">fillcolor</span> <span class="k">if</span> <span class="n">fillcolor</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">kk</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]),</span><span class="n">kk</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">ret</span><span class="o">=</span><span class="s2">&quot;.. graphviz::</span><span class="se">\n\n\t</span><span class="s2">digraph </span><span class="si">%s</span><span class="s2"> {</span><span class="se">\n\t\t</span><span class="s2">rankdir=LR;</span><span class="se">\n\t\t</span><span class="s2">margin=.2;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">ret</span><span class="o">+=</span><span class="n">mkNode</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="n">cc</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">includeBase</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;wooExtra.&#39;</span><span class="p">):</span> <span class="k">continue</span>
            <span class="c1"># this class will have its own diagram for inheritance</span>
            <span class="c1"># if hasattr(c,&#39;_classTrait&#39;) and c._classTrait.title and c._classTrait.klassesUnder:</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="vm">__module__</span><span class="o">==</span><span class="n">currmod</span><span class="p">:</span> <span class="n">ret</span><span class="o">+=</span><span class="n">mkNode</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">ret</span><span class="o">+=</span><span class="n">mkNode</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;filled&#39;</span><span class="p">,</span><span class="n">fillcolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
            <span class="n">ret</span><span class="o">+=</span><span class="s1">&#39;</span><span class="se">\t\t</span><span class="s1">&quot;</span><span class="si">%s</span><span class="s1">&quot; -&gt; &quot;</span><span class="si">%s</span><span class="s1">&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;]&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">nodeName</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="n">nodeName</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ret</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">}</span><span class="se">\n\n</span><span class="s1">&#39;</span>


    <span class="k">def</span> <span class="nf">_docOneClassWithSectioning</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="c1"># print level*&#39;\t&#39;,k.__name__</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="s1">&#39;_classTrait&#39;</span><span class="p">):</span> <span class="k">return</span> <span class="c1"># will be documented later</span>
        <span class="n">t</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">_classTrait</span>
        <span class="n">nextLevel</span><span class="o">=</span><span class="n">level</span>
        <span class="c1">#global prevLevel</span>
        <span class="c1">#if not t.title:</span>
        <span class="c1">#    # decrasing level without section -- write dividing line</span>
        <span class="c1">#    if prevLevel&gt;level: out.write(&#39;\n\n-----\n\n\n&#39;) #</span>
        <span class="c1">#prevLevel=level</span>
        <span class="c1">#if t.title: # write section title</span>
        <span class="n">nextLevel</span><span class="o">=</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">tt</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">title</span> <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">title</span> <span class="k">else</span> <span class="n">k</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">if</span> <span class="n">level</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.. rst-class:: html-toggle</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.. rst-class:: emphasized</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">tt</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span><span class="o">*</span><span class="s1">&#39;-+&quot;%</span><span class="se">\&#39;</span><span class="s1">^_&#39;</span><span class="p">[</span><span class="n">level</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#else:</span>
        <span class="c1">#    nextLevel=level+1</span>
        <span class="c1">#    kOut.write(k.__name__+&#39;\n&#39;+len(k.__name__)*(&#39;-&quot;\&#39;^+_%&#39;[level])+&#39;\n\n&#39;)</span>
        <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">intro</span><span class="p">:</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">intro</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="o">.</span><span class="n">title</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Class </span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1"> has intro but no title in class trait.&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="c1"># if there was a title different from the class title and there are classes under us, repeat the class name here on the subordinate level</span>
        <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nextLevel</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
                <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.. rst-class:: html-toggle</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">.. rst-class:: emphasized</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span><span class="o">*</span><span class="s1">&#39;-+&quot;%</span><span class="se">\&#39;</span><span class="s1">^_&#39;</span><span class="p">[</span><span class="n">nextLevel</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># print inheritance</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">!=</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">:</span>
            <span class="n">bb</span><span class="o">=</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="c1"># if len(bb[-1].__bases)==0: break</span>
                <span class="n">bb</span><span class="o">+=</span><span class="p">[</span><span class="n">bb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">bb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="n">woo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Object</span><span class="p">:</span> <span class="k">break</span>
                <span class="k">if</span> <span class="n">bb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="nb">object</span><span class="p">:</span> <span class="k">break</span> <span class="c1">## in one case this breaks...!??</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="sa">u</span><span class="s1">&#39; → &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">u</span><span class="s1">&#39;:obj:`~</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">b</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">bb</span><span class="p">)])</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># print derived classes</span>
        <span class="k">if</span> <span class="n">klassesUnder</span> <span class="ow">and</span> <span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
            <span class="n">kOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">_inheritanceDiagram</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="n">_docOneClass</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="n">klassesUnder</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="n">k</span><span class="o">!=</span><span class="n">kk</span>
            <span class="c1"># print kk.__name__</span>
            <span class="n">_docOneClassWithSectioning</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span><span class="n">nextLevel</span><span class="p">)</span>
        <span class="c1">#if not t.title and t.intro:</span>

    <span class="c1"># document any c++ classes in a special way</span>
    <span class="c1"># defer writing that to out though so that automodule can exclude classes which are documented manually</span>
    <span class="kn">import</span> <span class="nn">io</span>
    <span class="n">kOut</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">top</span> <span class="ow">in</span> <span class="n">tops</span><span class="p">:</span> <span class="n">_docOneClassWithSectioning</span><span class="p">(</span><span class="n">top</span><span class="p">,</span><span class="n">level</span><span class="p">)</span>

    <span class="c1"># document all remaining classes linearly here, if any</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">klasses</span><span class="p">:</span> <span class="n">_docOneClass</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="c1"># control whether autodocs are at the bottom or at the top</span>
    <span class="k">def</span> <span class="nf">writeAutoMod</span><span class="p">(</span><span class="n">mm</span><span class="p">,</span><span class="n">skip</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.. automodule:: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">   :members:</span><span class="se">\n</span><span class="s1">   :undoc-members:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mm</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">skip</span><span class="p">:</span> <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;   :exclude-members: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="s1">&#39;,  &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">e</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">skip</span><span class="p">])))</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">autoAtBottom</span><span class="o">=</span><span class="kc">False</span>
    <span class="k">if</span> <span class="n">autoAtBottom</span><span class="p">:</span>
        <span class="c1"># HACK: we want module&#39;s docstring to appear at the top, but autodocumented stuff at the bottom</span>
        <span class="c1"># dump __doc__ straight to the output here, and reset it, so that automodule does not pick it up</span>
        <span class="c1"># autodoc however automatically creates index entry for the module;</span>
        <span class="c1"># that&#39;s why we end up with bunch of SEVERE: Duplicate ID: &quot;module-...&quot; msgs</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.. module:: </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mod</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">mod</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">=</span><span class="kc">None</span>
        <span class="c1"># if there are no classes, avoid warning from sphinx</span>
        <span class="k">if</span> <span class="n">klasses</span><span class="p">:</span> <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.. inheritance-diagram:: </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> 
        <span class="c1"># insert documentation of classes</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">kOut</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
        <span class="c1"># document the rest of the module here (don&#39;t recurse)</span>
        <span class="n">writeAutoMod</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span><span class="n">skip</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># automodule first, including inheritance tree (are excluded classes excluded from the tree as well?)</span>
        <span class="c1"># exlude classes which are are then documented manually</span>
        <span class="c1"># if there are no classes, avoid warning from sphinx</span>
        <span class="k">if</span> <span class="n">klasses</span><span class="p">:</span> <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.. inheritance-diagram:: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">   :parts: </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="k">if</span> <span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;woo.&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">))</span> <span class="c1"># without showing module name in the inheritance diagram</span>
        <span class="n">writeAutoMod</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span><span class="n">skip</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">kOut</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
    <span class="c1"># imported modules</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span><span class="s1">&#39;_docInlineModules&#39;</span><span class="p">):</span>
        <span class="c1"># negative level will skip heading</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">_docInlineModules</span><span class="p">:</span> <span class="n">oneModuleWithSubmodules</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">out</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">importedInto</span><span class="o">=</span><span class="n">mod</span><span class="p">)</span>
    <span class="c1"># nested modules</span>
    <span class="c1"># with nested heading</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">allWooMods</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))]:</span> <span class="n">oneModuleWithSubmodules</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">out</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span></div>



<div class="viewcode-block" id="makeSphinxHtml"><a class="viewcode-back" href="../../woo.document.html#woo.document.makeSphinxHtml">[docs]</a><span class="k">def</span> <span class="nf">makeSphinxHtml</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="s1">&#39;Given a class, try to guess name of the HTML page where it is documented by Sphinx&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;woo.&#39;</span><span class="p">):</span> <span class="k">return</span> <span class="n">k</span><span class="o">.</span><span class="vm">__module__</span>
    <span class="n">mod</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># sphinx does not make the hierarchy any deeper than 2</span>
    <span class="k">for</span> <span class="n">start</span><span class="p">,</span><span class="n">repl</span> <span class="ow">in</span> <span class="p">[(</span><span class="s1">&#39;_pack&#39;</span><span class="p">,</span><span class="s1">&#39;pack&#39;</span><span class="p">),(</span><span class="s1">&#39;_qt&#39;</span><span class="p">,</span><span class="s1">&#39;qt&#39;</span><span class="p">),(</span><span class="s1">&#39;_utils&#39;</span><span class="p">,</span><span class="s1">&#39;utils&#39;</span><span class="p">)]:</span>
        <span class="k">if</span> <span class="n">mod</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">start</span><span class="p">):</span> <span class="k">return</span> <span class="s1">&#39;woo.&#39;</span><span class="o">+</span><span class="n">repl</span>
    <span class="k">return</span> <span class="s1">&#39;woo.&#39;</span><span class="o">+</span><span class="n">mod</span></div>

<div class="viewcode-block" id="makeClassAttrDocUrl"><a class="viewcode-back" href="../../woo.document.html#woo.document.makeClassAttrDocUrl">[docs]</a><span class="k">def</span> <span class="nf">makeClassAttrDocUrl</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span><span class="n">attr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Return URL to documentation of Woo class or its attribute in http://woodem.org.</span>
<span class="sd">    :param klass: class object</span>
<span class="sd">    :param attr:  attribute to link to. If given, must exist directly in given *klass* (not its parent); if not given or empty, link to the class itself is created and *attr* is ignored.</span>
<span class="sd">    :return: URL as text</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">dotAttr</span><span class="o">=</span><span class="p">((</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">attr</span><span class="p">)</span> <span class="k">if</span> <span class="n">attr</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">klass</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;wooExtra.&#39;</span><span class="p">):</span>
        <span class="n">KEY</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="mi">2</span><span class="p">])]</span><span class="o">.</span><span class="n">KEY</span>
        <span class="k">return</span> <span class="s1">&#39;https://www.woodem.eu/private/</span><span class="si">{KEY}</span><span class="s1">/doc/index.html#</span><span class="si">{module}</span><span class="s1">.</span><span class="si">{klass}{dotAttr}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">KEY</span><span class="o">=</span><span class="n">KEY</span><span class="p">,</span><span class="n">module</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">klass</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">dotAttr</span><span class="o">=</span><span class="n">dotAttr</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{sphinxPrefix}</span><span class="s1">/</span><span class="si">{sphinxHtml}</span><span class="s1">.html#</span><span class="si">{module}</span><span class="s1">.</span><span class="si">{klass}{dotAttr}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sphinxPrefix</span><span class="o">=</span><span class="n">sphinxPrefix</span><span class="p">,</span><span class="n">sphinxHtml</span><span class="o">=</span><span class="n">makeSphinxHtml</span><span class="p">(</span><span class="n">klass</span><span class="p">),</span><span class="n">module</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">klass</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">dotAttr</span><span class="o">=</span><span class="n">dotAttr</span><span class="p">)</span></div>

<div class="viewcode-block" id="makeObjectUrl"><a class="viewcode-back" href="../../woo.document.html#woo.document.makeObjectUrl">[docs]</a><span class="k">def</span> <span class="nf">makeObjectUrl</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return HTML href to a *obj* optionally to the attribute *attr*.</span>
<span class="sd">    The class hierarchy is crawled upwards to find out in which parent class is *attr* defined,</span>
<span class="sd">    so that the href target is a valid link. In that case, only single inheritace is assumed and</span>
<span class="sd">    the first class from the top defining *attr* is used.</span>

<span class="sd">    :param obj: object of class deriving from :obj:`woo.core.Object`, or string; if string, *attr* must be empty.</span>
<span class="sd">    :param attr: name of the attribute to link to; if empty, linke to the class itself is created.</span>

<span class="sd">    :returns: HTML with the hyperref.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">attr</span><span class="p">:</span>
        <span class="n">klass</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">while</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span> <span class="n">klass</span><span class="o">=</span><span class="n">klass</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">klass</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span>
    <span class="k">return</span> <span class="n">makeClassAttrDocUrl</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span><span class="n">attr</span><span class="p">)</span></div>

<div class="viewcode-block" id="makeObjectHref"><a class="viewcode-back" href="../../woo.document.html#woo.document.makeObjectHref">[docs]</a><span class="k">def</span> <span class="nf">makeObjectHref</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Create HTML hyperlink, wrapping :obj:`makeObjectUrl`. adding ``&lt;a href=&quot;...&quot;&gt;text&lt;/a&gt;``.</span>

<span class="sd">    :param text: visible text of the hyperlink; if not given, either class name or attribute name without class name (when *attr* is given) is used.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">attr</span><span class="p">:</span> <span class="n">text</span><span class="o">=</span><span class="n">attr</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">text</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">return</span> <span class="s1">&#39;&lt;a href=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/a&gt;&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">makeObjectUrl</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">attr</span><span class="p">),</span><span class="n">text</span><span class="p">)</span></div>


<div class="viewcode-block" id="makeCGeomFunctorsMatrix"><a class="viewcode-back" href="../../woo.document.html#woo.document.makeCGeomFunctorsMatrix">[docs]</a><span class="k">def</span> <span class="nf">makeCGeomFunctorsMatrix</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">woo</span><span class="o">,</span> <span class="nn">woo.dem</span><span class="o">,</span> <span class="nn">woo.system</span>
    <span class="kn">import</span> <span class="nn">prettytable</span>
    <span class="n">ggg0</span><span class="o">=</span><span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">dem</span><span class="o">.</span><span class="n">CGeomFunctor</span><span class="p">)</span>
    <span class="n">ggg</span><span class="o">=</span><span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">ggg0</span><span class="p">:</span>
        <span class="c1"># handle derived classes which don&#39;t really work as functors (Cg2_Any_Any_L6Geom__Base)</span>
        <span class="k">try</span><span class="p">:</span> 
            <span class="n">g</span><span class="p">()</span><span class="o">.</span><span class="n">bases</span>
            <span class="n">ggg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span> 

    <span class="n">ss</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">childClasses</span><span class="p">(</span><span class="n">woo</span><span class="o">.</span><span class="n">dem</span><span class="o">.</span><span class="n">Shape</span><span class="p">))</span>
    <span class="n">ss</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">ss</span><span class="o">=</span><span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ss</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Membrane&#39;</span><span class="p">,</span><span class="s1">&#39;Tet4&#39;</span><span class="p">)]</span> <span class="c1"># Membrane is useless here, as it is the same as Facet</span>

    <span class="k">def</span> <span class="nf">type2sphinx</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="s1">&#39;:obj:`~</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">t</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s1">&#39;:obj:`</span><span class="si">%s</span><span class="s1"> &lt;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&gt;`&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">t</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span><span class="n">t</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">t</span><span class="o">=</span><span class="n">prettytable</span><span class="o">.</span><span class="n">PrettyTable</span><span class="p">([</span><span class="s1">&#39;&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">type2sphinx</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ss</span><span class="p">],</span><span class="n">border</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">hrules</span><span class="o">=</span><span class="n">prettytable</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s1</span> <span class="ow">in</span> <span class="n">ss</span><span class="p">:</span>
        <span class="n">row</span><span class="o">=</span><span class="p">[</span><span class="n">type2sphinx</span><span class="p">(</span><span class="n">s1</span><span class="p">)]</span> <span class="c1"># header column</span>
        <span class="k">for</span> <span class="n">s2</span> <span class="ow">in</span> <span class="n">ss</span><span class="p">:</span>
            <span class="n">gg</span><span class="o">=</span><span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">ggg</span> <span class="k">if</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">g</span><span class="p">()</span><span class="o">.</span><span class="n">bases</span><span class="p">)</span><span class="o">==</span><span class="nb">sorted</span><span class="p">([</span><span class="n">s1</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">s2</span><span class="o">.</span><span class="vm">__name__</span><span class="p">])]</span>
            <span class="n">cell</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">gg</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;L6Geom&#39;</span><span class="p">):</span> <span class="n">cell</span><span class="o">+=</span><span class="p">[</span><span class="n">type2sphinx</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="s1">&#39;l6g&#39;</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="n">g</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;G3Geom&#39;</span><span class="p">):</span> <span class="n">cell</span><span class="o">+=</span><span class="p">[</span><span class="n">type2sphinx</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="s1">&#39;g3g&#39;</span><span class="p">)]</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="n">RuntimError</span><span class="p">(</span><span class="s1">&#39;CGeomFunctor name does not end in L6Geom or G3Geom.&#39;</span><span class="p">)</span>
            <span class="n">cell</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># so that l6g comes first</span>
            <span class="k">if</span> <span class="n">cell</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cell</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;×&#39;</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">tt</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">get_string</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">tt</span><span class="o">=</span><span class="p">[(</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span><span class="o">!=</span><span class="mi">2</span> <span class="k">else</span> <span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tt</span><span class="p">))]</span>
    <span class="c1"># return &#39;.. tabularcolumns:: |l|&#39;+&#39;|&#39;.join(len(ss)*[&#39;c&#39;])+&#39;\n\n&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span></div>


</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../index.html">Woo 1.0+rev1-git-d0ff403 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">woo.document</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2012−2022, Václav Šmilauer &lt;eu@doxos.eu&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>